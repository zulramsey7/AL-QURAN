<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Waktu Solat - QuranDigital2025</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="yasin.css"> 
    <link rel="stylesheet" href="solat.css">

    <meta name="theme-color" content="#2d6a4f">
</head>
<body class="bg-light">

<div id="solat-app" v-cloak>
    
    <div v-if="isAzanPlaying" class="stop-azan-overlay animate__animated animate__fadeIn">
        <div class="text-center bg-white p-4 rounded-4 shadow-lg mx-3">
            <div class="spinner-grow text-success mb-3" role="status"></div>
            <h4 class="fw-bold d-block mb-3 text-dark">Azan Sedang Berkumandang</h4>
            <button @click="stopAzan" class="btn btn-danger btn-lg rounded-pill px-5 shadow">
                <i class="fas fa-stop me-2"></i>Senyapkan
            </button>
        </div>
    </div>

    <div class="app-wrapper">
        
        <div class="top-bar-container">
            <div class="top-bar-pill">
                <a href="index.html" class="text-decoration-none text-dark me-auto">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <h6 class="mb-0 fw-bold mx-auto" style="color: #1b4332;">Waktu Solat</h6>
                <button @click="refreshLocation" class="btn btn-sm ms-auto p-0" :disabled="loading">
                    <i class="fas fa-rotate text-success" :class="{'fa-spin': loading}"></i>
                </button>
            </div>
        </div>

        <header class="prayer-hero-v2 text-center text-white shadow-sm">
            <div class="container animate__animated animate__fadeIn">
                <div class="mb-2 mt-1">
                    <span class="badge bg-white text-success rounded-pill px-3 py-2 shadow-sm">
                        <i class="fas fa-map-marker-alt me-2"></i> {{ locationName }}
                    </span>
                </div>
                <h1 class="display-1 fw-bold mb-0 clock-text">{{ currentTime }}</h1>
                <p class="fs-6 opacity-75 mb-0">{{ hijriDate }}</p>
                
                <div class="countdown-container mt-3">
                    <div class="countdown-pill">
                        <small class="text-uppercase fw-light" style="font-size: 0.7rem;">Menuju {{ nextPrayerName }}</small>
                        <div class="h3 mb-0 fw-bold">{{ countdown }}</div>
                    </div>
                </div>
            </div>
        </header>

        <main class="container mt-4">
            <div v-if="error" class="alert alert-warning border-0 shadow-sm rounded-4 mb-4 small py-2">
                <i class="fas fa-info-circle me-2"></i> {{ error }}
            </div>

            <div class="row justify-content-center">
                <div class="col-12 col-md-10 col-lg-8">
                    <div class="prayer-list d-flex flex-column gap-2">
                        <div v-for="prayer in orderedPrayers" :key="prayer.name" 
                             :class="['prayer-card-item', {'active-now': prayer.name === nextPrayerName}]">
                            
                            <div class="d-flex align-items-center">
                                <div class="prayer-icon"><i :class="getIcon(prayer.name)"></i></div>
                                <div class="ms-3">
                                    <div class="fw-bold">{{ prayer.name }}</div>
                                    <small v-if="prayer.name === nextPrayerName" class="text-success fw-bold">Sekarang</small>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center gap-3">
                                <div class="fw-bold fs-5">{{ prayer.time }}</div>
                                <div v-if="prayer.name !== 'Syuruk'" @click="azanSettings[prayer.name] = !azanSettings[prayer.name]" class="cursor-pointer">
                                    <i :class="['fas', azanSettings[prayer.name] ? 'fa-bell text-success' : 'fa-bell-slash text-muted']" style="width: 20px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-5">
                <h6 class="fw-bold mb-3"><i class="fas fa-calendar-alt me-2 text-success"></i>Jadual Bulanan</h6>
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 text-center align-middle small">
                            <thead class="bg-light text-muted">
                                <tr>
                                    <th class="py-3">Hari</th>
                                    <th>Subuh</th>
                                    <th>Zohor</th>
                                    <th>Asar</th>
                                    <th>Maghrib</th>
                                    <th>Isyak</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="day in monthlyData" :key="day.day" :class="{'table-success fw-bold': isToday(day.day)}">
                                    <td class="py-2 text-dark">{{ day.day }}</td>
                                    <td>{{ day.fajr }}</td>
                                    <td>{{ day.dhuhr }}</td>
                                    <td>{{ day.asr }}</td>
                                    <td>{{ day.maghrib }}</td>
                                    <td>{{ day.isha }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-center py-5 text-muted">
            <hr class="opacity-10 mb-4 mx-5">
            <p class="mb-0" style="font-size: 0.7rem;">Â© 2025 QuranDigital2025</p>
            <p class="fw-bold text-uppercase mb-0" style="font-size: 0.65rem;">Waktu Solat Automatik (GPS)</p>
            <button class="btn btn-sm btn-outline-success rounded-pill px-4 mt-3" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <i class="fas fa-chevron-up"></i>
            </button>
        </footer>
    </div>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script src="solat.js"></script>
</body>
</html>