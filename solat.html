<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Waktu Solat - QuranDigital2025</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="solat.css">

    <meta name="theme-color" content="#2d6a4f">
    <style>
        [v-cloak] { display: none; }
        .clock-text { letter-spacing: -2px; line-height: 1; }
        .prayer-card-item {
            background: white;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .active-now {
            border-left: 5px solid #2d6a4f;
            background: #e9f5ee;
        }
    </style>
</head>
<body class="bg-light">

<div id="solat-app" v-cloak>
    
    <div v-if="isAzanPlaying" class="stop-azan-overlay animate__animated animate__fadeIn" style="position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); z-index:9999; display:flex; align-items:center; justify-content:center;">
        <div class="text-center bg-white p-4 rounded-4 shadow-lg mx-3">
            <div class="spinner-grow text-success mb-3" role="status"></div>
            <h4 class="fw-bold d-block mb-3 text-dark">Azan Berkumandang</h4>
            <button @click="stopAzan" class="btn btn-danger btn-lg rounded-pill px-5 shadow">
                <i class="fas fa-stop me-2"></i>Senyapkan
            </button>
        </div>
    </div>

    <div class="app-wrapper">
        
        <div class="top-bar-container">
            <div class="top-bar-pill">
                <a href="index.html" class="text-decoration-none text-dark me-auto">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <h6 class="mb-0 fw-bold mx-auto" style="color: var(--tn-green-dark);">Waktu Solat</h6>
                <button @click="refreshLocation" class="btn btn-sm ms-auto p-0" :disabled="loading">
                    <i class="fas fa-rotate text-success" :class="{'fa-spin': loading}"></i>
                </button>
            </div>
        </div>

        <div class="container">
            <div class="prayer-card animate__animated animate__fadeIn mb-4 mt-2">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        <h6 class="mb-0 opacity-75" style="font-size: 0.8rem;">
                            <i class="fas fa-location-dot me-1"></i> {{ locationName }}
                        </h6>
                        <h1 class="clock-text fw-bold mb-0 mt-1" style="font-size: 3.5rem;">{{ currentTime }}</h1>
                        <p class="small opacity-75 mb-0">{{ hijriDate }}</p>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-white text-success rounded-pill px-3 py-2 fw-bold shadow-sm">
                            {{ nextPrayerName }}
                        </span>
                    </div>
                </div>
                
                <div class="mt-2 p-2 rounded-3 text-center" style="background: rgba(255,255,255,0.15);">
                    <p class="mb-0 small fw-bold">
                        <i class="far fa-clock me-1"></i> 
                        Baki {{ countdown }} ke {{ nextPrayerName }}
                    </p>
                </div>
            </div>
        </div>

        <main class="container">
            <div v-if="error" class="alert alert-warning border-0 shadow-sm rounded-4 mb-4 small py-2">
                <i class="fas fa-info-circle me-2"></i> {{ error }}
            </div>

            <div class="row justify-content-center">
                <div class="col-12">
                    <div class="prayer-list">
                        <div v-for="prayer in orderedPrayers" :key="prayer.name" 
                             :class="['prayer-card-item animate__animated animate__fadeInUp', {'active-now': prayer.name === nextPrayerName}]">
                            
                            <div class="d-flex align-items-center">
                                <div class="prayer-icon text-success fs-5" style="width: 30px;">
                                    <i :class="getIcon(prayer.name)"></i>
                                </div>
                                <div class="ms-3">
                                    <div class="fw-bold text-dark">{{ prayer.name }}</div>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center gap-3">
                                <div class="fw-bold fs-5 text-dark">{{ prayer.time }}</div>
                                <div v-if="prayer.name !== 'Syuruk'" @click="azanSettings[prayer.name] = !azanSettings[prayer.name]" class="cursor-pointer">
                                    <i :class="['fas', azanSettings[prayer.name] ? 'fa-bell text-success' : 'fa-bell-slash text-muted']" style="width: 20px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-5 mb-5">
                <h6 class="fw-bold mb-3 px-2" style="color: var(--tn-green-dark);">
                    <i class="fas fa-calendar-alt me-2"></i>Jadual Bulanan
                </h6>
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 text-center align-middle small">
                            <thead class="bg-light">
                                <tr>
                                    <th class="py-3 border-0">Hari</th>
                                    <th class="border-0 text-success">Subuh</th>
                                    <th class="border-0 text-success">Zohor</th>
                                    <th class="border-0 text-success">Asar</th>
                                    <th class="border-0 text-success">Maghrib</th>
                                    <th class="border-0 text-success">Isyak</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="day in monthlyData" :key="day.day" :class="{'table-success fw-bold': isToday(day.day)}">
                                    <td class="py-2 text-dark">{{ day.day }}</td>
                                    <td>{{ day.fajr }}</td>
                                    <td>{{ day.dhuhr }}</td>
                                    <td>{{ day.asr }}</td>
                                    <td>{{ day.maghrib }}</td>
                                    <td>{{ day.isha }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-center py-5 text-muted">
            <hr class="opacity-10 mb-4 mx-5">
            <p class="mb-0" style="font-size: 0.7rem;">Â© 2025 QuranDigital2025</p>
            <p class="fw-bold text-uppercase mb-0" style="font-size: 0.65rem;">Sumber: JAKIM / AlAdhan</p>
            <button class="btn btn-sm btn-outline-success rounded-pill px-4 mt-3" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <i class="fas fa-chevron-up"></i>
            </button>
        </footer>
    </div>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script src="solat.js"></script>
</body>
</html>